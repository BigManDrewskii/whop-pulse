@layer theme, base, frosted_ui, components, utilities;

@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/preflight.css" layer(base);
@import "tailwindcss/utilities.css" layer(utilities);
@import "@whop/react/styles.css" layer(frosted_ui);

@config '../tailwind.config.ts';

body {
	background-color: var(--color-background);
	color: var(--color-text);
	font-family: Arial, Helvetica, sans-serif;
}

/* Toast Animation */
@keyframes slide-in-from-right {
	from {
		transform: translateX(100%);
		opacity: 0;
	}
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

.animate-slide-in-from-right {
	animation: slide-in-from-right 0.3s ease-out;
}

/* Tooltip Fade-in Animation */
@keyframes fade-in {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

.animate-fade-in {
	animation: fade-in 0.15s ease-out;
}

/* Accessibility - Focus Indicators */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
	outline: 2px solid var(--indigo-9);
	outline-offset: 2px;
}

/* Ensure good color contrast for links */
a {
	color: inherit;
	text-decoration: none;
}

a:hover {
	text-decoration: none;
}

/* Custom theme utilities */
[data-accent-color] {
	--accent-9: var(--indigo-9);
	--accent-10: var(--indigo-10);
}

/* Ensure buttons use the warm indigo */
button[data-accent-color] {
	background-color: var(--indigo-9);
}

button[data-accent-color]:hover {
	background-color: var(--indigo-10);
}

/* Badge color overrides */
[data-accent-color="green"] {
	--accent-9: var(--color-success);
}

[data-accent-color="orange"] {
	--accent-9: var(--color-warning);
}

[data-accent-color="red"] {
	--accent-9: var(--color-error);
}

/* ============================================
   INPUT TEXT VISIBILITY FIX - CRITICAL
   ============================================ */

/* Search input - make text MUCH more visible */
input[type="text"],
input[type="search"],
input[type="email"],
input[type="number"],
textarea {
	color: var(--color-text) !important;
	font-size: 0.9375rem !important;
	font-weight: 500 !important;
}

/* Placeholder text - visible but subtle */
input::placeholder,
textarea::placeholder {
	color: var(--color-text-tertiary) !important;
	opacity: 0.6 !important;
}

/* Focus state - even more visible */
input:focus,
textarea:focus,
select:focus {
	color: var(--color-text) !important;
	outline: 2px solid var(--indigo-9) !important;
	outline-offset: 2px !important;
}

/* Specific fix for search input in member table */
input[placeholder*="Search"],
input[placeholder*="search"] {
	color: #1e293b !important; /* Force dark text */
	background-color: white !important;
	border: 1px solid var(--color-border) !important;
	padding: 0.625rem 1rem 0.625rem 3.5rem !important; /* Top/Bottom, Right, Left (56px for icon clearance) */
}

/* Select dropdowns */
select {
	color: var(--color-text) !important;
	font-weight: 500 !important;
}

/* Dark mode input fixes */
.dark input[type="text"],
.dark input[type="search"],
.dark input[type="email"],
.dark input[type="number"],
.dark textarea {
	color: #f1f5f9 !important; /* Near-white text on dark background */
	background-color: #2c2825 !important;
	font-weight: 600 !important; /* Bolder for better visibility */
}

.dark input::placeholder,
.dark textarea::placeholder {
	color: #94a3b8 !important;
	opacity: 0.7 !important;
}

.dark select {
	color: #f1f5f9 !important;
	background-color: #2c2825 !important;
	font-weight: 600 !important;
}

/* Ensure text is ALWAYS visible */
[data-radix-scroll-area-viewport] input {
	color: var(--color-text) !important;
}

/* ============================================
   COMPREHENSIVE DARK MODE SUPPORT
   ============================================ */

/* Dark mode base */
.dark {
	background-color: var(--color-background);
	color: var(--color-text);
}

/* Dark mode cards and surfaces - Exclude nav elements */
.dark .bg-white:not(nav),
.dark [class*="bg-white"]:not(nav) {
	background-color: var(--color-surface) !important;
	color: var(--color-text) !important;
}

/* Dark mode panels */
.dark .bg-gray-50,
.dark .bg-background {
	background-color: var(--color-background) !important;
}

.dark .bg-panel {
	background-color: var(--color-panel) !important;
}

/* Dark mode text colors - High specificity */
.dark .text-gray-900,
.dark .text-foreground,
.dark h1,
.dark h2,
.dark h3,
.dark p.text-gray-900,
.dark span.text-gray-900,
.dark td .text-gray-900,
.dark td p,
.dark td span {
	color: var(--color-text) !important;
}

.dark .text-gray-700,
.dark p.text-gray-700,
.dark span.text-gray-700 {
	color: var(--color-text) !important;
}

.dark .text-gray-600,
.dark .text-secondary,
.dark p.text-gray-600 {
	color: var(--color-text-secondary) !important;
}

.dark .text-gray-500,
.dark .text-gray-400,
.dark .text-tertiary,
.dark div.text-gray-500 {
	color: var(--color-text-tertiary) !important;
}

/* Dark mode borders */
.dark .border-gray-200,
.dark .border-gray-300,
.dark .border-border {
	border-color: var(--color-border) !important;
}

.dark .border-gray-100,
.dark .border-border-subtle {
	border-color: var(--color-border-subtle) !important;
}

/* Dark mode hover states */
.dark .hover\:bg-gray-50:hover,
.dark [class*="hover:bg-gray-50"]:hover {
	background-color: var(--color-panel) !important;
}

.dark .hover\:bg-gray-100:hover {
	background-color: var(--color-surface) !important;
}

/* Dark mode table headers */
.dark thead {
	background-color: var(--color-panel) !important;
}

.dark th {
	color: var(--color-text-secondary) !important;
}

/* Dark mode table rows */
.dark tr:hover {
	background-color: var(--color-panel) !important;
}

/* Dark mode shadows - reduce intensity */
.dark .shadow-sm {
	box-shadow: var(--shadow-sm);
}

.dark .shadow-md {
	box-shadow: var(--shadow-md);
}

.dark .shadow-lg {
	box-shadow: var(--shadow-lg);
}

/* Dark mode footer - Extra specificity for "Showing X of Y" text */
.dark [class*="bg-background"] p,
.dark [class*="bg-background"] span,
.dark [class*="border-t"] .text-gray-700,
.dark [class*="border-t"] .text-gray-900 {
	color: var(--color-text) !important;
}

.dark .text-gray-300 {
	color: var(--color-text-secondary) !important;
}

/* Dark mode backgrounds for specific elements */
.dark .bg-gray-100 {
	background-color: var(--color-panel) !important;
}

.dark .bg-gray-200 {
	background-color: var(--color-surface) !important;
}

/* Dark mode - Status colored text overrides (for Engagement Score cards) */
.dark .text-green-700,
.dark h3.text-green-700,
.dark .font-bold.text-green-700 {
	color: #4ade80 !important; /* Lighter green for visibility */
}

.dark .text-green-800 {
	color: #86efac !important; /* Even lighter green */
}

.dark .text-yellow-800,
.dark h3.text-yellow-800,
.dark .font-bold.text-yellow-800 {
	color: #fbbf24 !important; /* Lighter yellow for visibility */
}

.dark .text-yellow-700 {
	color: #fde047 !important; /* Even lighter yellow */
}

.dark .text-red-700,
.dark h3.text-red-700,
.dark .font-bold.text-red-700 {
	color: #f87171 !important; /* Lighter red for visibility */
}

.dark .text-red-800 {
	color: #fca5a5 !important; /* Even lighter red */
}

/* Dark mode - "Need More Help" gradient card override */
.dark [class*="from-primary-600"][class*="to-primary-700"],
.dark [class*="from-primary-600"][class*="to-primary-800"] {
	background-image: linear-gradient(to bottom right, #4338ca, #3730a3) !important; /* Darker indigo gradient */
}

.dark [class*="from-primary-600"][class*="to-primary-700"] h2,
.dark [class*="from-primary-600"][class*="to-primary-700"] p,
.dark [class*="from-primary-600"][class*="to-primary-800"] h2,
.dark [class*="from-primary-600"][class*="to-primary-800"] p {
	color: white !important;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* Subtle shadow for better readability */
}

.dark [class*="from-primary-600"][class*="to-primary-700"] .bg-white,
.dark [class*="from-primary-600"][class*="to-primary-800"] .bg-white {
	background-color: rgba(255, 255, 255, 0.15) !important; /* Semi-transparent icon circle */
	backdrop-filter: blur(10px);
}

/* Dark mode - Colored status label cards and badges */
.dark .bg-green-50,
.dark .bg-green-100 {
	background-color: #14532d !important; /* Dark green */
}

.dark .bg-yellow-50,
.dark .bg-yellow-100 {
	background-color: #713f12 !important; /* Dark yellow/amber */
}

.dark .bg-red-50,
.dark .bg-red-100 {
	background-color: #7f1d1d !important; /* Dark red */
}

.dark .border-green-200,
.dark .border-green-500 {
	border-color: #16a34a !important;
}

.dark .border-yellow-200,
.dark .border-yellow-500 {
	border-color: #eab308 !important;
}

.dark .border-red-200,
.dark .border-red-500 {
	border-color: #dc2626 !important;
}

/* ============================================
   NAVBAR - FORCE 100% SOLID OPACITY
   ============================================ */

/* Light mode navbar - Force solid white */
nav {
	background-color: #ffffff !important;
	opacity: 1 !important;
}

/* Dark mode navbar - Force solid dark */
.dark nav {
	background-color: #111827 !important;
	opacity: 1 !important;
}

/* Ensure navbar border is visible */
nav.border-b,
nav.border-b-2 {
	border-bottom-width: 2px !important;
	border-bottom-color: #d1d5db !important;
}

.dark nav.border-b,
.dark nav.border-b-2 {
	border-bottom-color: #1f2937 !important;
}

/* ============================================
   MEMBER QUICK ACTIONS - HOVER MENU
   ============================================ */

/* Member row hover effects */
.group:hover {
	background-color: rgba(99, 102, 241, 0.05);
	transition: background-color 0.15s ease;
}

/* Dark mode row hover */
.dark .group:hover {
	background-color: var(--color-panel) !important;
}

/* Quick actions button - hidden by default, shown on row hover */
.quick-actions-btn {
	opacity: 0;
	transition: opacity 0.15s ease;
}

.group:hover .quick-actions-btn {
	opacity: 1;
}

/* Quick actions dropdown styling */
.quick-actions-menu button {
	color: var(--color-text);
	font-size: 0.875rem;
	transition: background-color 0.1s ease;
}

.quick-actions-menu button:hover {
	background-color: rgba(99, 102, 241, 0.1);
}

/* Dark mode quick actions menu */
.dark .quick-actions-menu {
	background-color: var(--color-surface) !important;
	border-color: var(--color-border) !important;
	box-shadow: var(--shadow-lg);
}

.dark .quick-actions-menu button {
	color: var(--color-text) !important;
}

.dark .quick-actions-menu button:hover {
	background-color: var(--color-panel) !important;
}

/* ============================================
   RECHARTS - ENGAGEMENT CHART STYLING
   ============================================ */

/* Recharts tooltip dark mode fix */
.dark .recharts-tooltip-wrapper {
	filter: none !important;
}

.dark .recharts-default-tooltip {
	background-color: var(--color-surface) !important;
	border-color: var(--color-border) !important;
}

/* Chart responsive improvements */
.recharts-wrapper {
	font-family: inherit;
}

.recharts-cartesian-axis-tick-value {
	fill: var(--color-text-secondary);
}

/* Dark mode chart styling */
.dark .recharts-cartesian-grid-horizontal line,
.dark .recharts-cartesian-grid-vertical line {
	stroke: var(--color-border) !important;
}

.dark .recharts-cartesian-axis-tick-value {
	fill: var(--color-text-secondary) !important;
}

/* Chart container dark mode */
.dark .recharts-wrapper {
	color: var(--color-text) !important;
}

/* Tooltip styling for dark mode */
.dark .recharts-tooltip-wrapper .recharts-default-tooltip {
	background-color: var(--color-panel) !important;
	border-color: var(--color-border) !important;
	box-shadow: var(--shadow-lg);
}

.dark .recharts-tooltip-label {
	color: var(--color-text) !important;
}

.dark .recharts-tooltip-item {
	color: var(--color-text-secondary) !important;
}
